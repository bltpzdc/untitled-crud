# Глоссарий
## Термины
- Анализатор --- динамический анализатор файловых систем "DIFFuzzer"
- ФС --- файловая система
- Испытание --- запуск анализатора, сравнивающий реализации двух ФС
- Вывод испытания --- артефакты, создаваемые анализатором в ходе проведения испытания
- Вызов --- POSIX-согласованный системный вызов к ФС
- Тест --- упорядоченная последовательность вызовов 
- Поведение ФС на тесте --- последовательность кодов возвратов вызовов из теста на данной ФС
- Ошибка --- различие в поведениях двух ФС на одном тесте
- Тип ошибки --- список из всех вызовов, на которых различаются поведения ФС, коды возврата на обеих ФС
- Сценарий --- последовательность действий,  используемая для анализа системы
- Отчет --- структурированная единица данных, содержащую информацию об одном отдельном испытании: параметры испытания, результаты и дополнительные сведения
- Комментарий --- необязательное текстовое поле отчета

## Верхнеуровневое описание работы анализатора

Анализатор запускается на устройстве, на котором доступно две ФС для тестирования.
В ходе работы анализатор рассматривает различные тесты и сравнивает поведения ФС на них.
Если была выявлена ошибка (то есть поведения ФС на данном тесте разошлись), создается папка, содержащая тест, поведения ФС на тесте, краткое сравнение поведений в формате Markdown, артефакты запусков (вывод кода, исполняющего вызовы).


# Назначение и цели создания системы

## Назначение системы

Система предназначен для упрощения управления большим объемом отчетов, быстрого поиска и сопоставления различных версий тестируемых систем и инструментов.

## Бизнес-цели

Отслеживать прогресс в тестировании ФС

## Цели проекта

- Обеспечить централизованное хранение, обработку и визуализацию результатов анализа файловых систем.
- Облегчить управление большим количеством отчетов и данных от различных версий инструментов и систем.
- Повысить эффективность анализа отчетов об ошибках.

Для достижения указанных целей должны быть решены следующие задачи:

- Разработать систему хранения информации о результатах испытаний на основе отчетов.
- Реализовать API для автоматической загрузки вывода испытания с дальнейшим созданием отчета.
- Обеспечить возможность ручного внесения вывода испытания.
- Разработать легковесную систему отображения, позволяющую фильтровать и искать информацию о загруженных испытаниях.
- Обеспечить расширяемость системы для поддержки новых типов данных и метрик.


# Функциональные требования
- FR01. Система позволяет автоматически создать отчет на основе вручную загруженных вывода анализатора и метаданных.
- FR02. Система предоставляет API для автоматической загрузки анализатором по завершении анализа.
- FR03. Для каждого отчета должно быть предусмотрено хранение следующих данных:  
    - название и версия тестируемой файловой системы;
    - версия анализатора, сгенерировавшего данный отчёт;
    - информация о сервере, на котором проводилось испытание;
    - тест;
    - тип выявленной ошибки;
    - пользовательский комментарий.
- FR04. Все поля отчета кроме комментария должны автоматически заполняться на основе вывода анализатора и загруженных метаданных.
- FR05. Пользовательский комментарий может быть добавлен любым пользователем при добавлении или просмотре отчета.
- FR06. При просмотре отчета имеющийся пользовательский комментарий можно изменить.
- FR07. Система должна обеспечивать возможность добавления новых полей отчета пользователем.
- FR08. Система позволяет просматривать загруженные отчеты с помощью веб-интерфейса.
- FR09. Пользователь может фильтровать перечень отображаемых отчетов по выбранным им параметрам.
- FR10. Пользователь может удалить отчет из системы.
- FR11. Веб-интерфейс визуализирует отчёты, упрощая зрительное восприятие по сравнению с чтением отчетов из консоли.


# Нефункциональные требования
- NFR1. Поставка ПО выполняется в виде одного архива, содержащего файлы для запуска сервиса с помощью Docker Compose.
- NFR2. Веб-интерфейс является частью Docker Compose сервисов, поставляемых с сервисом хранения информации.
- NFR3. Работа с сервисом производится только по HTTPS протоколу.
- NFR4. ПО должно работать на ОС Windows, Linux и MacOSX при использовании 2.39.3 Docker Compose.
- NFR5. Веб-интерфейс должен корректно работать с Firefox версии 144.0.
- NFR6. Веб-интерфейс должен корректно работать с Chromium версии 141.0.7390.107.
- NFR7. Ожидаемый размер данных не более 1 мегабайта (до тысячи операций).
- NFR8. Ожидаемая нагрузка на систему - единицы запросов в час.

# Сценарии использования
| Название | UC1. Добавление отчета вручную |
| --- | --- |
| Актор | Пользователь |
| Триггер | Испытание завершено на устройстве без доступа в интернет |
| Основной сценарий | 1. пользователь загружает в систему файлы, полученные в ходе испытания.     1а. пользователь добавляет текстовый комментарий(опционально).     2. система проверяет корректность загруженных файлов и сохраняет их.     3. система отображает уведомление об успешном добавлении отчета и диалоговое окно с выбором: добавить еще один отчет или перейти к просмотру ранее добавленного |
| Альтернативные сценарии |      |
| Негативные сценарии | 3а. система отображает уведомление о некорректности загруженных данных, отчет не создается. 3б. система отображает уведомление о внутренней ошибке и описание проблемы, отчет не создается |
| Связанные требования | FR01, FR03, FR04, FR05 |

| Название | UC2. Добавление отчета автоматически |
| --- | --- |
| Актор | Анализатор |
| Триггер | Испытание завершено на устройстве с доступом в интернет |
| Основной сценарий | 1. анализатор с помощью API отправляет в систему данные об испытании. 2. система проверяет корректность загруженных файлов и сохраняет их. 3. система отправляет уведомление об успешном добавлении отчета |
| Альтернативные сценарии |      |
| Негативные сценарии | 3а. система отправляет уведомление о некорректности загруженных данных, отчет не создается. 3б. система отправляет уведомление о внутренней ошибке и описание проблемы, отчет не создается |
| Связанные требования | FR02, FR03, FR04, FR05 |

| Название | UC3. Просмотр отчета и работа с комментарием |
| --- | --- |
| Актор | Пользователь |
| Триггер | Пользователь хочет просмотреть отчет и изменить комментарий |
| Основной сценарий | 1. пользователь выбирает нужный отчет в списке. 2. система отображает содержимое отчета. 3. пользователь редактирует имеющийся комментарий и подтверждает ввод. 3а. пользователь добавляет комментарий, вводит текст и подтверждает ввод. 4. система сохраняет изменения и отображает уведомление об успешности операции |
| Альтернативные сценарии |      |
| Негативные сценарии | 2. система отображает уведомление об ошибке получения данных. 4. при невозможности выполнить запрос к БД система отображает уведомление о внутренней ошибке и описание проблемы |
| Связанные требования | FR05, FR06, FR08, FR11 |

| Название | UC4. Поиск отчета по фильтрам |
| --- | --- |
| Актор | Пользователь |
| Триггер | Пользователь хочет найти нужный отчет(ы) |
| Основной сценарий | 1. пользователь задает требуемые фильтры и запускает поиск. 2. система производит поиск записей, соответствующих заданным фильтрам. 3. система отображает список отчетов, соответствующих критериям пользователя |
| Альтернативные сценарии | 3а. если соответствующих отчетов не найдено, система отображает уведомление и предлагает изменить параметры поиска |
| Негативные сценарии | 3а. при невозможности выполнить запрос к БД система отображает уведомление о внутренней ошибке и описание проблемы |
| Связанные требования | FR09 |

| Название | UC5. Удаление отчета |
| --- | --- |
| Актор | Пользователь |
| Триггер | Пользователь хочет удалить отчет |
| Основной сценарий | 1. пользователь выбирает нужный отчет в списке. 2. система отображает содержимое отчета. 3. пользователь нажимает кнопку “удалить отчет”. 4. система запрашивает подтверждение. 5. пользователь подтверждает удаление. 6. система отправляет запрос на удаление записи из системы. 7. система отображает уведомление об успешном удалении отчета |
| Альтернативные сценарии | 5а. пользователь не подтверждает удаление. отчет остается без изменений |
| Негативные сценарии | 2. система отображает уведомление об ошибке получения данных. 7. при невозможности выполнить запрос к БД система отображает уведомление о внутренней ошибке и описание проблемы |
| Связанные требования | FR10 |

| Название | UC6. Добавление новых полей |
| --- | --- |
| Актор | Пользователь |
| Триггер | Пользователь хочет добавить новые поля отчета при расширении системы |
| Основной сценарий | **TODO** |
| Негативные сценарии |      |
| Связанные требования | FR07 |

![Сценарии использования интерфейса](uml/frontend_usecases.png){width=60%}

![Сценарии использования API](uml/backend_usecases.png){width=60%}

![Открытие веб-интерфейса](uml/frontend_startup.png){width=60%}

![Запуск сервиса](uml/backend_startup.png){width=60%}
